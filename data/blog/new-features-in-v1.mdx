---
title: 'v1 æ–°ç‰¹æ€§'
date: 2021-08-07T15:32:14Z
lastmod: '2021-02-01'
tags: ['next-js', 'tailwind', 'guide']
draft: false
summary: 'v1 å‘å¸ƒçš„æ–°ç‰¹æ€§æ¦‚è¿° - ä»£ç å—å¤åˆ¶ã€å¤šä½œè€…ã€frontmatter å¸ƒå±€ç­‰ç­‰'
layout: PostSimple
bibliography: references-data.bib
---

## æ¦‚è¿°

ä¸€ç¯‡å…³äº v1.0 ä¸­å¼•å…¥çš„æ–°ç‰¹æ€§çš„æ–‡ç« ã€‚æ–°ç‰¹æ€§ï¼š

<TOCInline toc={props.toc} exclude="Overview" toHeading={2} />

å°½ç®¡æ·»åŠ äº†è®¸å¤šæ–°ç‰¹æ€§ï¼Œé¦–æ¬¡åŠ è½½çš„ JS ä» 43kB å‡å°‘åˆ° 39kBï¼[^1]

[^1]: éšç€ Nextjs 12 çš„æ–°å˜åŒ–ï¼Œé¦–æ¬¡åŠ è½½çš„ JS å¢åŠ åˆ° 45kBã€‚

å¦‚æœä½ æ­£åœ¨ä»æ¨¡æ¿çš„ v0 ç‰ˆæœ¬è¿ç§»ï¼Œè¯·å‚é˜…ä¸‹æ–¹çš„[å‡çº§æŒ‡å—](#upgrade-guide)ã€‚

## ä¸»é¢˜é¢œè‰²

ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹ tailwind é…ç½®æ–‡ä»¶ä¸­çš„ primary å±æ€§æ¥è½»æ¾è°ƒæ•´ä¸»é¢˜é¢œè‰²ï¼š

```js:tailwind.config.js
theme: {
    colors: {
      primary: colors.teal,
      gray: colors.neutral,
      ...
    }
  ...
}
```

primary é¢œè‰²å±æ€§åº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä» 50ã€100ã€200 ... åˆ° 900 çš„é”®å’Œç›¸åº”çš„é¢œè‰²ä»£ç å€¼ã€‚

Tailwind åŒ…å«äº†å‡ºè‰²çš„é»˜è®¤è°ƒè‰²æ¿ï¼Œå¯ç”¨äºè‡ªå®šä¹‰ç½‘ç«™ä¸»é¢˜ã€‚æŸ¥çœ‹[è‡ªå®šä¹‰é¢œè‰²æ–‡æ¡£é¡µé¢](https://tailwindcss.com/docs/customizing-colors)äº†è§£æ‰€æœ‰å¯ç”¨é€‰é¡¹ã€‚

ä» v1 è¿ç§»ï¼Ÿä½ å¯ä»¥é€šè¿‡å°† `primary` è®¾ç½®ä¸º `colors.sky`ï¼ˆTailwind 2.2.2 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå¦åˆ™ä½¿ç”¨ `colors.lightBlue`ï¼‰å¹¶å°† gray æ”¹ä¸º `colors.gray` æ¥æ¢å¤ä¹‹å‰çš„ä¸»é¢˜ã€‚

ä» v1.1.2+ å¼€å§‹ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡ä¿®æ”¹ `css/prism.css` æ ·å¼è¡¨æ¥è½»æ¾è‡ªå®šä¹‰ä»£ç å—çš„æ ·å¼ã€‚Token ç±»åä¸ prismjs å…¼å®¹ï¼Œå› æ­¤ä½ å¯ä»¥ä» prismjs æ ·å¼è¡¨ä¸­å¤åˆ¶å’Œè°ƒæ•´ token æ ·å¼ï¼Œä¾‹å¦‚ [prism ä¸»é¢˜](https://github.com/PrismJS/prism-themes)ã€‚

## Xdm MDX ç¼–è¯‘å™¨

æˆ‘ä»¬å°† MDX æ‰“åŒ…å™¨ä» [next-mdx-remote](https://github.com/hashicorp/next-mdx-remote) åˆ‡æ¢åˆ°äº† [mdx-bundler](https://github.com/kentcdodds/mdx-bundler)ã€‚
å®ƒåœ¨åº•å±‚ä½¿ç”¨äº† [xdm](https://github.com/wooorm/xdm)ï¼Œå³æœ€æ–°çš„ micromark 3 å’Œ remarkã€rehype åº“ã€‚

**è­¦å‘Šï¼š** å¦‚æœä½ ä¹‹å‰ä½¿ç”¨äº†è‡ªå®šä¹‰çš„ remark æˆ– rehype åº“ï¼Œè¯·å‡çº§åˆ°å…¼å®¹ micromark 3 çš„ç‰ˆæœ¬ã€‚å¦‚æœä½ æ­£åœ¨å‡çº§ï¼Œè¯·åˆ é™¤ `node_modules` å’Œ `package-lock.json` ä»¥é¿å…ä¸è¿‡å»ä¾èµ–é¡¹ç›¸å…³çš„é—®é¢˜ã€‚

[xdm](https://github.com/wooorm/xdm) ç›¸æ¯” [@mdx-js/mdx](https://github.com/mdx-js/mdx)ï¼ˆnext-mdx-remote å†…éƒ¨ä½¿ç”¨çš„ç¼–è¯‘å™¨ï¼‰æœ‰å¤šä¸ªæ”¹è¿›ï¼Œä½†å¯èƒ½å­˜åœ¨ä¸€äº›ç ´åæ€§çš„è¡Œä¸ºå˜æ›´ã€‚
è¯·æ£€æŸ¥ä½ çš„ markdown è¾“å‡ºä»¥è¿›è¡ŒéªŒè¯ã€‚

ä¸€äº›æ–°çš„å¯èƒ½æ€§åŒ…æ‹¬ä½¿ç”¨ import è¯­æ³•ç›´æ¥åœ¨ mdx æ–‡ä»¶ä¸­åŠ è½½ç»„ä»¶ï¼Œä»¥åŠåŒ…å«å¯ä»¥åœ¨æ„å»ºæ­¥éª¤ä¸­ç¼–è¯‘å’Œæ‰“åŒ…çš„ js ä»£ç ã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹ jsx ä»£ç ç‰‡æ®µå¯ä»¥ç›´æ¥åœ¨ MDX æ–‡ä»¶ä¸­ç”¨äºæ¸²æŸ“é¡µé¢æ ‡é¢˜ç»„ä»¶ï¼š

```jsx
// å¦‚æœä½ ä½¿ç”¨ jsï¼Œå¯ä»¥ä½¿ç”¨ import PageTitle from './components/PageTitle.js'
import PageTitle from './components/PageTitle.tsx'
;<PageTitle> åœ¨ MDX ä¸­ä½¿ç”¨ JSX ç»„ä»¶ </PageTitle>
```

é»˜è®¤é…ç½®ä¼šç›¸å¯¹äº `components` ç›®å½•è§£ææ‰€æœ‰ç»„ä»¶ã€‚

**æ³¨æ„**ï¼š
éœ€è¦å¤–éƒ¨å›¾åƒåŠ è½½å™¨çš„ç»„ä»¶è¿˜éœ€è¦é¢å¤–çš„ esbuild é…ç½®ã€‚
ä¾èµ–äºå…¨å±€åº”ç”¨çŠ¶æ€æˆ–ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ï¼ˆå¦‚ Nextjs `Link` ç»„ä»¶ï¼‰ä¹Ÿæ— æ³•åœ¨æ­¤è®¾ç½®ä¸‹å·¥ä½œï¼Œå› ä¸ºæ¯ä¸ª mdx æ–‡ä»¶éƒ½æ˜¯ç‹¬ç«‹æ„å»ºçš„ã€‚
å¯¹äºè¿™ç§æƒ…å†µï¼Œæœ€å¥½ä½¿ç”¨ç»„ä»¶æ›¿æ¢ã€‚

## ç›®å½•ç»„ä»¶

å— [Docusaurus](https://docusaurus.io/docs/next/markdown-features/inline-toc) å’Œ Gatsby çš„ [gatsby-remark-table-of-contents](https://www.gatsbyjs.com/plugins/gatsby-remark-table-of-contents/) å¯å‘ï¼Œ
åŒ…å«æ–‡æ¡£æ‰€æœ‰é¡¶çº§æ ‡é¢˜çš„ `toc` å˜é‡ä¼šä¼ é€’ç»™ MDX æ–‡ä»¶ï¼Œå¹¶å¯ä»¥ç›¸åº”åœ°è¿›è¡Œæ ·å¼è®¾ç½®ã€‚
ä¸ºäº†ç®€åŒ–ç”Ÿæˆç›®å½•ï¼ˆTOCï¼‰çš„è¿‡ç¨‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ç°æœ‰çš„ `TOCInline` ç»„ä»¶ã€‚

ä¾‹å¦‚ï¼Œè¿™ç¯‡æ–‡ç« ä¸­çš„ç›®å½•æ˜¯é€šè¿‡ä»¥ä¸‹ä»£ç ç”Ÿæˆçš„ï¼š

```jsx
<TOCInline toc={props.toc} exclude="Overview" toHeading={2} />
```

ä½ å¯ä»¥é€šè¿‡é…ç½® `fromHeading` å’Œ `toHeading` å±æ€§æ¥è‡ªå®šä¹‰æ˜¾ç¤ºçš„æ ‡é¢˜ï¼Œæˆ–è€…é€šè¿‡å‘ `exclude` å±æ€§ä¼ é€’å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„æ¥æ’é™¤ç‰¹å®šæ ‡é¢˜ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ·±åº¦ä¸º 3 æˆ–æ›´å°çš„æ ‡é¢˜éƒ½ä¼šç¼©è¿›ã€‚è¿™å¯ä»¥é€šè¿‡æ›´æ”¹ `indentDepth` å±æ€§æ¥é…ç½®ã€‚
å¯ä»¥ä½¿ç”¨ `asDisclosure` å±æ€§å°†ç›®å½•æ¸²æŸ“åœ¨å¯å±•å¼€çš„å…ƒç´ ä¸­ã€‚

ä»¥ä¸‹æ˜¯åœ¨å¯å±•å¼€å…ƒç´ ä¸­æ¸²æŸ“çš„å®Œæ•´ç›®å½•ã€‚

```jsx
<TOCInline toc={props.toc} asDisclosure />
```

<TOCInline toc={props.toc} asDisclosure />

## å¸ƒå±€

ä½ å¯ä»¥é€šè¿‡é…ç½® frontmatter å­—æ®µå°† mdx åšå®¢å†…å®¹æ˜ å°„åˆ°å¸ƒå±€ç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œè¿™ç¯‡æ–‡ç« å°±æ˜¯ä½¿ç”¨æ–°çš„ `PostSimple` å¸ƒå±€ç¼–å†™çš„ï¼

### æ·»åŠ æ–°æ¨¡æ¿

å¸ƒå±€æ¨¡æ¿å­˜å‚¨åœ¨ `./layouts` æ–‡ä»¶å¤¹ä¸­ã€‚ä½ å¯ä»¥åœ¨æ­¤æ–‡ä»¶å¤¹ä¸­æ·»åŠ è¦æ˜ å°„åˆ° markdown å†…å®¹çš„ React ç»„ä»¶ã€‚
ç»„ä»¶æ–‡ä»¶åå¿…é¡»ä¸ markdown frontmatter ä¸­ `layout` å­—æ®µæŒ‡å®šçš„åç§°åŒ¹é…ã€‚

å”¯ä¸€å¿…éœ€çš„å­—æ®µæ˜¯ `children`ï¼Œå®ƒåŒ…å«æ¸²æŸ“åçš„ MDX å†…å®¹ï¼Œä½†ä½ å¯èƒ½å¸Œæœ›ä¼ å…¥ frontMatter å†…å®¹å¹¶åœ¨æ¨¡æ¿ä¸­æ¸²æŸ“å®ƒã€‚

ä½ å¯ä»¥é…ç½®æ¨¡æ¿æ¥å—å…¶ä»–å­—æ®µ - å‚è§ `PostLayout` ç»„ä»¶ä½œä¸ºç¤ºä¾‹ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¯ä»¥è¿›ä¸€æ­¥è‡ªå®šä¹‰çš„å¸ƒå±€ç¤ºä¾‹ï¼š

```jsx
export default function ExampleLayout({ frontMatter, children }) {
  const { date, title } = frontMatter

  return (
    <SectionContainer>
      <div>{date}</div>
      <h1>{title}</h1>
      <div>{children}</div>
    </SectionContainer>
  )
}
```

### é…ç½®åšå®¢æ–‡ç«  frontmatter

ä½¿ç”¨ frontmatter ä¸­çš„ `layout` å­—æ®µæ¥æŒ‡å®šè¦å°† markdown æ–‡ç« æ˜ å°„åˆ°çš„æ¨¡æ¿ã€‚è¿™ç¯‡æ–‡ç« çš„ frontmatter å¦‚ä¸‹æ‰€ç¤ºï¼š

```
---
title: 'New features in v1'
date: '2021-05-26   '
tags: ['next-js', 'tailwind', 'guide']
draft: false
summary: 'Introducing the new layout features - you can map mdx blog content to layout components by configuring the frontmatter field'
layout: PostSimple
---
```

ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹ `DEFAULT_LAYOUT` å˜é‡åœ¨ç›¸åº”çš„é¡µé¢éƒ¨åˆ†é…ç½®é»˜è®¤å¸ƒå±€ã€‚
åšå®¢æ–‡ç« é¡µé¢çš„ `DEFAULT_LAYOUT` è®¾ç½®ä¸º `PostLayout`ã€‚

### æ‰©å±•

`layout` è¢«æ˜ å°„ä¸ºåŒ…è£…å™¨ï¼ŒåŒ…è£…æ•´ä¸ª MDX å†…å®¹ã€‚

```jsx
export const MDXComponents = {
  Image,
  a: CustomLink,
  pre: Pre,
  wrapper: ({ components, layout, ...rest }) => {
    const Layout = require(`../layouts/${layout}`).default
    return <Layout {...rest} />
  },
}

export const MDXLayoutRenderer = ({ layout, mdxSource, ...rest }) => {
  const MDXLayout = useMemo(() => getMDXComponent(mdxSource), [mdxSource])

  return <MDXLayout layout={layout} components={MDXComponents} {...rest} />
}
```

åœ¨å¸Œæœ›æ¥å—å¸ƒå±€åç§°ä»¥æ˜ å°„åˆ°æ‰€éœ€å¸ƒå±€çš„é¡µé¢ä¸Šä½¿ç”¨ `MDXLayoutRenderer` ç»„ä»¶ã€‚
ä½ éœ€è¦ä»å¸ƒå±€æ–‡ä»¶å¤¹ä¼ é€’å¸ƒå±€åç§°ï¼ˆå¿…é¡»æ˜¯å®Œå…¨åŒ¹é…ï¼‰ã€‚

## åˆ†æ

è¯¥æ¨¡æ¿ç°åœ¨æ”¯æŒ [plausible](https://plausible.io/)ã€[simple analytics](https://simpleanalytics.com/) å’Œ google analyticsã€‚
ä½¿ç”¨ä¸æ‰€éœ€åˆ†ææä¾›å•†å¯¹åº”çš„è®¾ç½®é…ç½® `siteMetadata.js`ã€‚

```js
analytics: {
    // supports plausible, simpleAnalytics or googleAnalytics
    plausibleDataDomain: '', // e.g. tailwind-nextjs-starter-blog.vercel.app
    simpleAnalytics: false, // true or false
    googleAnalyticsId: '', // e.g. UA-000000-2 or G-XXXXXXX
  },
```

è¿˜æ”¯æŒè‡ªå®šä¹‰äº‹ä»¶ã€‚ä½ å¯ä»¥ä» `@components/analytics/[ANALYTICS-PROVIDER]` æ–‡ä»¶å¯¼å…¥ `logEvent` å‡½æ•°ï¼Œå¹¶åœ¨è§¦å‘æ„Ÿå…´è¶£çš„äº‹ä»¶æ—¶è°ƒç”¨å®ƒã€‚
_æ³¨æ„_ï¼šæ ¹æ®åˆ†ææä¾›å•†çš„ä¸åŒï¼Œå¯èƒ½éœ€è¦é¢å¤–çš„é…ç½®ï¼Œè¯·æŸ¥çœ‹å®ƒä»¬çš„å®˜æ–¹æ–‡æ¡£è·å–æ›´å¤šä¿¡æ¯ã€‚

## åšå®¢è¯„è®ºç³»ç»Ÿ

æˆ‘ä»¬è¿˜æ·»åŠ äº†å¯¹ [giscus](https://github.com/laymonage/giscus)ã€[utterances](https://github.com/utterance/utterances) æˆ– disqus çš„æ”¯æŒã€‚
è¦å¯ç”¨ï¼Œåªéœ€ä½¿ç”¨æ‰€éœ€çš„æä¾›å•†å’Œé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„è®¾ç½®é…ç½® `siteMetadata.js` çš„ comments å±æ€§ã€‚

```js
comment: {
    // Select a provider and use the environment variables associated to it
    // https://vercel.com/docs/environment-variables
    provider: 'giscus', // supported providers: giscus, utterances, disqus
    giscusConfig: {
      // Visit the link below, and follow the steps in the 'configuration' section
      // https://giscus.app/
      repo: process.env.NEXT_PUBLIC_GISCUS_REPO,
      repositoryId: process.env.NEXT_PUBLIC_GISCUS_REPOSITORY_ID,
      category: process.env.NEXT_PUBLIC_GISCUS_CATEGORY,
      categoryId: process.env.NEXT_PUBLIC_GISCUS_CATEGORY_ID,
      mapping: 'pathname', // supported options: pathname, url, title
      reactions: '1', // Emoji reactions: 1 = enable / 0 = disable
      // Send discussion metadata periodically to the parent window: 1 = enable / 0 = disable
      metadata: '0',
      // theme example: light, dark, dark_dimmed, dark_high_contrast
      // transparent_dark, preferred_color_scheme, custom
      theme: 'light',
      // theme when dark mode
      darkTheme: 'transparent_dark',
      // If the theme option above is set to 'custom`
      // please provide a link below to your custom theme css file.
      // example: https://giscus.app/themes/custom_example.css
      themeURL: '',
    },
    utterancesConfig: {
      // Visit the link below, and follow the steps in the 'configuration' section
      // https://utteranc.es/
      repo: process.env.NEXT_PUBLIC_UTTERANCES_REPO,
      issueTerm: '', // supported options: pathname, url, title
      label: '', // label (optional): Comment ğŸ’¬
      // theme example: github-light, github-dark, preferred-color-scheme
      // github-dark-orange, icy-dark, dark-blue, photon-dark, boxy-light
      theme: '',
      // theme when dark mode
      darkTheme: '',
    },
    disqus: {
      // https://help.disqus.com/en/articles/1717111-what-s-a-shortname
      shortname: process.env.NEXT_PUBLIC_DISQUS_SHORTNAME,
    },
  },
```

## å¤šä½œè€…

ä½œè€…ä¿¡æ¯ç°åœ¨ä» `siteMetadata.js` ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå­˜å‚¨åœ¨å•ç‹¬çš„ `data/authors` æ–‡ä»¶å¤¹ä¸­ä½œä¸º markdown æ–‡ä»¶ã€‚è‡³å°‘ï¼Œä½ éœ€è¦æœ‰ä¸€ä¸ªåŒ…å«ä½œè€…ä¿¡æ¯çš„ `default.md` æ–‡ä»¶ã€‚ä½ å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºå…¶ä»–æ–‡ä»¶ï¼Œæ–‡ä»¶åå°†ç”¨ä½œä½œè€…çš„å¼•ç”¨ã€‚

ä½œè€… markdown æ–‡ä»¶å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š

```md:default.md
---
name: Tails Azimuth
avatar: /static/images/avatar.png
occupation: Professor of Atmospheric Science
company: Stanford University
email: address@yoursite.com
twitter: https://twitter.com/Twitter
linkedin: https://www.linkedin.com
github: https://github.com
---

å…³äºä½ è‡ªå·±çš„è¯¦ç»†æè¿°...
```

ä½ å¯ä»¥åœ¨æ¨¡æ¿çš„å¤šä¸ªåœ°æ–¹ä½¿ç”¨è¿™äº›ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œåœ¨é¡µé¢çš„å…³äºéƒ¨åˆ†ï¼Œæˆ‘ä»¬ç”¨è¿™è¡Œä»£ç è·å–é»˜è®¤ä½œè€…ä¿¡æ¯ï¼š

```js
const authorDetails = await getFileBySlug('authors', ['default'])
```

è¿™åœ¨ `AuthorLayout` æ¨¡æ¿ä¸­æ¸²æŸ“ã€‚

### åšå®¢æ–‡ç« ä¸­çš„å¤šä½œè€…

åšå®¢æ–‡ç« çš„ frontmatter æ¥å—ä¸€ä¸ªå¯é€‰çš„ `authors` æ•°ç»„å­—æ®µã€‚å¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µï¼Œåˆ™å‡å®šä½¿ç”¨é»˜è®¤ä½œè€…ã€‚åªéœ€ä¼ å…¥ä¸€ä¸ªä½œè€…æ•°ç»„å³å¯æ¸²æŸ“ä¸æ–‡ç« å…³è”çš„å¤šä¸ªä½œè€…ã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹ frontmatter å°†æ˜¾ç¤ºç”± `data/authors/default.md` å’Œ `data/authors/sparrowhawk.md` ç»™å‡ºçš„ä½œè€…

```yaml
title: 'My first post'
date: '2021-01-12'
draft: false
summary: 'My first post'
authors: ['default', 'sparrowhawk']
```

å¤šä½œè€…æ–‡ç« çš„æ¼”ç¤ºæ˜¾ç¤ºåœ¨[ä»‹ç» Tailwind Nextjs å…¥é—¨åšå®¢æ–‡ç« ](/blog/introducing-tailwind-nextjs-starter-blog)ä¸­ã€‚

## ä»£ç å—å¤åˆ¶æŒ‰é’®

å°†é¼ æ ‡æ‚¬åœåœ¨ä»£ç å—ä¸Šï¼Œä½ ä¼šæ³¨æ„åˆ°ä¸€ä¸ªå— GitHub å¯å‘çš„å¤åˆ¶æŒ‰é’®ï¼ä½ å¯ä»¥ä¿®æ”¹ `./components/Pre.js` ä»¥è¿›ä¸€æ­¥è‡ªå®šä¹‰å®ƒã€‚
è¯¥ç»„ä»¶è¢«ä¼ é€’ç»™ `MDXComponents` å¹¶ä¿®æ”¹æ‰€æœ‰ `<pre>` å—ã€‚

## è¡Œé«˜äº®å’Œè¡Œå·

æ„Ÿè°¢æ–°çš„ [rehype-prism-plus æ’ä»¶](https://github.com/timlrx/rehype-prism-plus)ï¼Œç°åœ¨å¼€ç®±å³ç”¨åœ°æ”¯æŒè¡Œé«˜äº®å’Œè¡Œå·

ä»¥ä¸‹ javascript ä»£ç å—ï¼š

````
```js {1, 3-4} showLineNumbers
var num1, num2, sum
num1 = prompt('Enter first number')
num2 = prompt('Enter second number')
sum = parseInt(num1) + parseInt(num2) // "+" means "add"
alert('Sum = ' + sum) // "+" means combine into a string
```
````

å°†æ˜¾ç¤ºä¸ºï¼š

```js {1,3-4} showLineNumbers
var num1, num2, sum
num1 = prompt('Enter first number')
num2 = prompt('Enter second number')
sum = parseInt(num1) + parseInt(num2) // "+" means "add"
alert('Sum = ' + sum) // "+" means combine into a string
```

è¦ä¿®æ”¹æ ·å¼ï¼Œè¯·æ›´æ”¹ `prism.css` æ–‡ä»¶ä¸­çš„ä»¥ä¸‹ç±»é€‰æ‹©å™¨ï¼š

```css
.code-highlight {
  @apply float-left min-w-full;
}

.code-line {
  @apply -mx-4 block border-l-4 border-opacity-0 pl-4 pr-4;
}

.code-line.inserted {
  @apply bg-green-500 bg-opacity-20;
}

.code-line.deleted {
  @apply bg-red-500 bg-opacity-20;
}

.highlight-line {
  @apply -mx-4 border-l-4 border-primary-500 bg-gray-700 bg-opacity-50;
}

.line-number::before {
  @apply -ml-2 mr-4 inline-block w-4 text-right text-gray-400;
  content: attr(line);
}
```

## æ–°é—»é€šè®¯ç»„ä»¶ (v1.1.3)

åœ¨ v1.1.3 ä¸­å¼•å…¥çš„æ–°é—»é€šè®¯ç»„ä»¶ä¸ºä½ æä¾›äº†ä¸€ç§è½»æ¾å»ºç«‹å—ä¼—çš„æ–¹å¼ã€‚å®ƒä¸ä»¥ä¸‹æä¾›å•†é›†æˆï¼š

- [Mailchimp](https://mailchimp.com/)
- [Buttondown](https://buttondown.email/)
- [Convertkit](https://convertkit.com/)

è¦ä½¿ç”¨å®ƒï¼Œè¯·åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä½ æ­£åœ¨ä½¿ç”¨çš„æä¾›å•†ï¼Œå¹¶å°†å¿…è¦çš„ç¯å¢ƒå˜é‡æ·»åŠ åˆ° `.env` æ–‡ä»¶ä¸­ã€‚
æœ‰å…³æ‰€éœ€å˜é‡çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ `.env.sample.`

å¯¼å‡ºäº†ä¸¤ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªæ˜¯é»˜è®¤çš„ `NewsletterForm`ï¼Œå¦ä¸€ä¸ªæ˜¯ `BlogNewsletterForm` ç»„ä»¶ï¼Œå®ƒä¹Ÿä½œä¸º MDX ç»„ä»¶ä¼ å…¥ï¼Œ
å¯ä»¥åœ¨åšå®¢æ–‡ç« ä¸­ä½¿ç”¨ï¼š

```jsx
<BlogNewsletterForm title="å–œæ¬¢æ­£åœ¨é˜…è¯»çš„å†…å®¹ï¼Ÿ" />
```

<BlogNewsletterForm title="å–œæ¬¢æ­£åœ¨é˜…è¯»çš„å†…å®¹ï¼Ÿ" />

è¯¥ç»„ä»¶ä¾èµ– nextjs çš„ [API è·¯ç”±](https://nextjs.org/docs/api-routes/introduction)ï¼Œè¿™éœ€è¦è®¾ç½® nextjs çš„æœåŠ¡å™¨ç«¯å®ä¾‹ï¼Œ
å¹¶ä¸”ä¸ 100% é™æ€ç«™ç‚¹å¯¼å‡ºä¸å…¼å®¹ã€‚ç”¨æˆ·åº”è¯¥è‡ªè¡Œæ‰˜ç®¡æˆ–ä½¿ç”¨æ”¯æŒæ­¤åŠŸèƒ½çš„å…¼å®¹å¹³å°ï¼Œå¦‚ Vercel æˆ– Netlifyã€‚

é™æ€ç«™ç‚¹å…¼å®¹çš„æ›¿ä»£æ–¹æ¡ˆæ˜¯å°†æ–°é—»é€šè®¯ç»„ä»¶ä¸­çš„è·¯ç”±æ›¿æ¢ä¸ºè¡¨å• API ç«¯ç‚¹æä¾›å•†ã€‚

## å‚è€ƒæ–‡çŒ®å’Œå¼•ç”¨ (v1.2.1)

`rehype-citation` æ’ä»¶å·²æ·»åŠ åˆ° v1.2.1 çš„ xdm å¤„ç†ç®¡é“ä¸­ã€‚è¿™å…è®¸ä½ è½»æ¾æ ¼å¼åŒ–å¼•ç”¨å¹¶ä»ç°æœ‰çš„ bibtex æˆ– CSL-json æ–‡ä»¶ä¸­æ’å…¥å‚è€ƒæ–‡çŒ®ã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹ markdown ä»£ç ç¤ºä¾‹ï¼š

```md
Standard citation [@Nash1950]
In-text citations e.g. @Nash1951
Multiple citations [see @Nash1950; @Nash1951, page 50]

**References:**

[^ref]
```

æ¸²æŸ“ä¸ºä»¥ä¸‹å†…å®¹ï¼š

Standard citation [@Nash1950]  
In-text citations e.g. @Nash1951  
Multiple citations [see @Nash1950; @Nash1951, page 50]

**References:**

[^ref]

å‚è€ƒæ–‡çŒ®å°†æ’å…¥åœ¨æ–‡æ¡£æœ«å°¾ï¼Œä½†è¿™å¯ä»¥é€šè¿‡åœ¨é¢„æœŸä½ç½®æŒ‡å®š `[^Ref]` æ ‡ç­¾æ¥è¦†ç›–ã€‚
è¯¥æ’ä»¶ä½¿ç”¨ APA å¼•ç”¨æ ¼å¼ï¼Œä½†ä¹Ÿæ”¯æŒä»¥ä¸‹ CSLï¼š'apa'ã€'vancouver'ã€'harvard1'ã€'chicago'ã€'mla'ï¼Œæˆ–ç”¨æˆ·æŒ‡å®šçš„ CSL æ–‡ä»¶è·¯å¾„ã€‚

æœ‰å…³é…ç½®é€‰é¡¹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ [rehype-citation è‡ªè¿°æ–‡ä»¶](https://github.com/timlrx/rehype-citation)ã€‚

## è‡ªæ‰˜ç®¡å­—ä½“ (v1.5.0)

Google å­—ä½“å·²è¢« [Fontsource](https://fontsource.org/) çš„è‡ªæ‰˜ç®¡å­—ä½“æ›¿æ¢ã€‚è¿™å¸¦æ¥äº†ä»¥ä¸‹[ä¼˜åŠ¿](https://fontsource.org/docs/introduction)ï¼š

> è‡ªæ‰˜ç®¡å¸¦æ¥äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œå› ä¸ºä»æ‰˜ç®¡æœåŠ¡ï¼ˆå¦‚ Google Fontsï¼‰åŠ è½½å­—ä½“ä¼šå¯¼è‡´é¢å¤–çš„ï¼ˆæ¸²æŸ“é˜»å¡ï¼‰ç½‘ç»œè¯·æ±‚ã€‚ä¸ºäº†æä¾›å‚è€ƒï¼Œå¯¹äºç®€å•çš„ç½‘ç«™ï¼Œè§†è§‰åŠ è½½æ—¶é—´å·²çœ‹åˆ°ç¿»å€ã€‚
>
> å­—ä½“ä¿æŒç‰ˆæœ¬é”å®šã€‚Google ç»å¸¸åœ¨æ²¡æœ‰é€šçŸ¥çš„æƒ…å†µä¸‹æ¨é€å­—ä½“æ›´æ–°ï¼Œè¿™å¯èƒ½ä¼šå¹²æ‰°ä½ çš„åœ¨çº¿ç”Ÿäº§é¡¹ç›®ã€‚åƒç®¡ç†ä»»ä½•å…¶ä»– NPM ä¾èµ–é¡¹ä¸€æ ·ç®¡ç†ä½ çš„å­—ä½“ã€‚
>
> è‡´åŠ›äºéšç§ã€‚Google ç¡®å®ä¼šè·Ÿè¸ªå…¶å­—ä½“çš„ä½¿ç”¨æƒ…å†µï¼Œå¯¹äºæåº¦å…³æ³¨éšç§çš„äººæ¥è¯´ï¼Œè‡ªæ‰˜ç®¡æ˜¯ä¸€ç§æ›¿ä»£æ–¹æ¡ˆã€‚

è¿™å¯¼è‡´å­—ä½“åŒ…æ›´å°ï¼ŒåŠ è½½æ—¶é—´å¿« 0.1sï¼ˆ[webpagetest å¯¹æ¯”](https://www.webpagetest.org/video/compare.php?tests=220201_AiDcFH_f68a69b758454dd52d8e67493fdef7da,220201_BiDcMC_bf2d53f14483814ba61e794311dfa771)ï¼‰ã€‚

è¦æ›´æ”¹é»˜è®¤çš„ Inter å­—ä½“ï¼š

1. å®‰è£…é¦–é€‰çš„[å­—ä½“](https://fontsource.org/fonts) - `npm install -save @fontsource/<font-name>`
2. æ›´æ–° `pages/_app.js` ä¸­çš„å¯¼å…¥ - `import '@fontsource/<font-name>.css'`
3. æ›´æ–° tailwind css é…ç½®æ–‡ä»¶ä¸­çš„ `fontfamily` å±æ€§

## å‡çº§æŒ‡å—

ä» v0 åˆ° v1ï¼Œä»£ç ä¸­æœ‰å¤§é‡éƒ¨åˆ†å·²æ›´æ”¹ï¼ŒåŒ…æ‹¬å¯¹å¸ƒå±€çš„æ”¯æŒå’Œæ–°çš„ mdx å¼•æ“ã€‚

å¦‚æœä¹‹å‰çš„ç‰ˆæœ¬æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œä¹Ÿæ²¡æœ‰çœŸæ­£çš„ç†ç”±å»æ›´æ”¹ï¼Œå°†ä½ æ„Ÿå…´è¶£çš„ç»„ä»¶æ›´æ”¹å¤åˆ¶åˆ°ä½ ç°æœ‰çš„åšå®¢å¯èƒ½æ¯”è¿ç§»æ‰€æœ‰å†…å®¹æ›´å®¹æ˜“ã€‚

å°½ç®¡å¦‚æ­¤ï¼Œå¦‚æœä½ æƒ³è¿™æ ·åšä¸”æ²¡æœ‰æ›´æ”¹å¤ªå¤šæ¨¡æ¿ï¼Œä½ å¯ä»¥å…‹éš†æ–°ç‰ˆæœ¬å¹¶å°†åšå®¢æ–‡ç« å¤åˆ¶åˆ°æ–°æ¨¡æ¿ä¸­ã€‚

å¦ä¸€ç§é€‰æ‹©æ˜¯ä½¿ç”¨ä»¥ä¸‹ä»£ç æ‹‰å–æœ€æ–°çš„æ¨¡æ¿ç‰ˆæœ¬ï¼š

```bash
git remote add template git@github.com:timlrx/tailwind-nextjs-starter-blog.git
git pull template v1 --allow-unrelated-histories
rm -rf node_modules
```

ä½ å¯ä»¥åœ¨æˆ‘çš„ä¸ªäººåšå®¢çš„è¿™ä¸ª[æäº¤](https://github.com/timlrx/timlrx.com/commit/bba1c185384fd6d5cdaac15abf802fdcff027286)ä¸­çœ‹åˆ°è¿™æ ·çš„è¿ç§»ç¤ºä¾‹ã€‚

v1 è¿˜ä½¿ç”¨ `feed.xml` è€Œä¸æ˜¯ `index.xml`ï¼Œä»¥é¿å…ä¸ Vercel çš„ä¸€äº›æ„å»ºé—®é¢˜ã€‚å¦‚æœä½ æ­£åœ¨è¿ç§»ï¼Œä½ åº”è¯¥åƒè¿™æ ·å‘ `next.config.js` æ·»åŠ é‡å®šå‘ï¼š

```js
async redirects() {
  return [
    {
      source: '/:path/index.xml',
      destination: '/:path/feed.xml',
      permanent: true,
    }
  ]
}
```
